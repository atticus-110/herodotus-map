<!DOCTYPE html>
<html>
<head>
  <title>Herodotus Map</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Styles -->
  <style>
    * {
      box-sizing: border-box;
    }

    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: sans-serif;
    }

    #container {
      display: flex;
      height: 100vh;
      width: 100vw;
    }

    #sidebar {
      width: 220px;
      background: #f7f3e9;
      padding: 10px;
      overflow-y: auto;
      border-right: 1px solid #ccc;
    }

    #sidebar h2 {
      font-size: 18px;
      margin-top: 0;
    }

    #sidebar ul {
      list-style: none;
      padding: 0;
    }

    #sidebar li {
      margin: 8px 0;
    }

    #sidebar a {
      color: #333;
      text-decoration: none;
      cursor: pointer;
    }

    #sidebar a:hover {
      text-decoration: underline;
    }

    #map {
      flex: 1;
    }

    .region-label {
      background: none;
      border: none;
      color: darkgoldenrod;
      font-weight: bold;
      font-size: 16px;
      text-shadow: 1px 1px 2px white;
    }
  </style>
</head>

<body>
  <div id="container">
    <div id="sidebar">
      <h2>Index</h2>
      <button onclick="showAll()">Show All</button>
      <ul>
        <li><a onclick="focusOn('io')">Io</a></li>
        <li><a onclick="focusOn('gyges')">Gyges</a></li>
      </ul>
    </div>
    <div id="map"></div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    // === Base Maps ===
    const ancientMap = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; <a href="https://carto.com/">CARTO</a> Ancient-style',
    });

    const modernMap = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    });

    // === Create Map ===
    const map = L.map('map', {
      center: [38, 25],
      zoom: 5,
      layers: [ancientMap]
    });

    // === Layer Groups ===
    const gygesGroup = L.layerGroup().addTo(map);
    const ioGroup = L.layerGroup().addTo(map);

    // === Gyges Story ===
    const sardis = L.marker([38.4746, 28.0428]).bindPopup(`<strong>Sardis</strong><br>Capital of Lydia.<br>Herodotus 1.7`);
    sardis.addTo(gygesGroup);

    const lydia = L.polygon([
      [38.8, 27.5],
      [38.8, 28.5],
      [37.8, 28.5],
      [37.8, 27.5]
    ], {
      color: "gold",
      fillColor: "#f0e68c",
      fillOpacity: 0.3
    }).bindPopup("Lydia: Kingdom ruled by Candaules and then Gyges.<br>Herodotus 1.7");
    lydia.addTo(gygesGroup);

    // === Io Story ===
    const argos = L.marker([37.6333, 22.7333]).bindPopup(`<strong>Argos</strong><br>Home of Io.`);
    const memphis = L.marker([29.8492, 31.2544]).bindPopup(`<strong>Memphis</strong><br>Destination of Io in Egypt.`);

    const ioRoute = L.polyline([
      [37.6333, 22.7333],
      [29.8492, 31.2544]
    ], {
      color: "purple",
      weight: 3,
      dashArray: "5,8",
      opacity: 0.7
    }).bindTooltip("Journey of Io");

    argos.addTo(ioGroup);
    memphis.addTo(ioGroup);
    ioRoute.addTo(ioGroup);

    // === Sidebar Control Functions ===
    function focusOn(character) {
      map.removeLayer(ioGroup);
      map.removeLayer(gygesGroup);

      if (character === 'io') {
        ioGroup.addTo(map);
        map.fitBounds(ioGroup.getBounds());
      } else if (character === 'gyges') {
        gygesGroup.addTo(map);
        map.fitBounds(gygesGroup.getBounds());
      }
    }

    function showAll() {
      map.addLayer(ioGroup);
      map.addLayer(gygesGroup);
      map.setView([38, 25], 5);
    }
  </script>
</body>
</html>
